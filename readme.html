<h1>node-typedjs</h1>

<p><a href="https://secure.travis-ci.org/goatslacker/node-typedjs.png)](http://travis-ci.org/goatslacker/node-typedjs">![Build Status</a></p>

<p>This is the <a href="http://typedjs.com">TypedJS</a> module for node.js</p>

<p>TypedJS lets you annotate your JavaScript functions with Haskell-like type signatures and then runs a set of automated tests against those functions.</p>

<p>For more information visit the <a href="https://github.com/Proxino/TypedJS">TypedJS GitHub repo</a></p>

<h2>Install</h2>

<p>In your project</p>

<pre><code>npm install typedjs</code></pre>

<p>Globally to check all your projects</p>

<pre><code>npm install typedjs -g</code></pre>

<h2>How-to</h2>

<h3>Adding individual tests</h3>

<p>You may add individual functions to run the automated tests on.</p>

<pre><code>  var typedjs = require(&#39;typedjs&#39;);

  var tests = typedjs.createTests();

  tests.addTest(&#39;foo :: Number -&gt; Number -&gt; Number&#39;, function foo(a, b) {
    return a + b;
  });

  tests.run(); // Boolean. true if tests passed, else false.
  tests.data; // contains information on which functions passed and failed.</code></pre>

<h3>Test a file</h3>

<pre><code>var typedjs = require(&#39;typedjs&#39;);
var fs = require(&#39;fs&#39;);

// By passing the contents of a file as a String into createTests
// you&#39;ll add the automated tests to all the global functions in the code.
var tests = typedjs.createTests(fs.readFileSync(&#39;myfile.js&#39;).toString());
tests.run();</code></pre>

<h3>Dealing with closures</h3>

<p>If you&#39;re testing a file the functions must be global otherwise TypedJS doesn&#39;t run
the automated tests on them.</p>

<p>Fortunately this module lets you deal with those closures under one condition, the
functions may not call other functions.</p>

<pre><code>var typedjs = require(&#39;typedjs&#39;);
var fs = require(&#39;fs&#39;);

var code = fs.readFileSync(&#39;myfile.js&#39;).toString();

// the second parameter tells node-typedjs to extract all functions within
// that have type signatures attached to them
var tests = typedjs.createTests(code, true);
tests.run();</code></pre>

<h3>Contracts</h3>

<p>Although the automated tests are great, coupling typedjs with your
unit tests to make sure the types are enforced at runtime is a great way
to spot new bugs and improve code quality.</p>

<pre><code>var typedjs = require(&#39;typedjs&#39;);
var code = &#39;function concat(a, b) { return a + b; } //+ concat :: String -&gt; String -&gt; String&#39;;

var tests = typedjs.enforce(code);

tests.run(function (context) {
  context.concat(5, 2); // will fail
  context.concat(&#39;foo&#39;, &#39;bar&#39;); // will pass
});

// you can also run it as a String
tests.run(&#39;concat(&quot;hello&quot;, &quot;world&quot;)&#39;);</code></pre>

<h2>API</h2>

<p>Automated tests are created by calling <code>createTests</code></p>

<p>Contracts are created by calling <code>enforce</code></p>

<h3>createTests(code, extract)</h3>

<ul><li>code - {String} optional piece of code to run automated tests against</li><li>extract - {Boolean} if true node-typedjs will extract all functions and run them individually</li></ul>

<h3>enforce(code)</h3>

<ul><li>code - {String} enforce a contract on some code</li></ul>

<h2>Credits</h2>

<ul><li>TypedJS - <a href="http://ethanfast.com/">Ethan Fast</a></li><li>node-typedjs - <a href="http://www.goatslacker.com">Josh Perez</a></li></ul>

<h2>License</h2>

<p><a href="http://josh.mit-license.org">MIT-LICENSE</a></p>
