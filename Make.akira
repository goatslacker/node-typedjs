fs = require: 'fs'
{ @spawn @exec } = require: 'child_process'

start-time = Date.now!

_build = fn [callback] {
  shell = spawn: 'akira' ['compile' 'src/transform/index.akira' 'lib/transform']
  shell.stdout.on: 'data' -> (&0 | String | print)
  shell.stderr.on: 'data' -> (&0 | String | print)
  shell.on: 'exit' callback
}

time = fn [f] {
  end-time = Date.now!
  (end-time - start-time) | String | (++ 'ms') | print
}

build = -> (_build: time)

export { @build }
